System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var t,e,n,o,s,a,r,i,c,l,u,d,m,p,g,f,h,j,L,v,b,y;return{setters:[function(c){t=c.a,e=c.o,n=c.r,o=c.q,s=c.b,a=c.g,r=c.n,i=c.w},function(t){c=t.F,l=t.g,u=t.q,d=t._,m=t.I,p=t.U,g=t.o,f=t.a,h=t.R,j=t.$,L=t.n,v=t.V,b=t.T,y=t.b}],execute:function(){let w=null;async function T(t){const e=t.getAttribute("data-item-name")||"items",n=t.value,o=parseInt(t.getAttribute("data-item-minimum"))||0,s=parseInt(t.getAttribute("data-item-maximum"))||300,a=parseInt(t.getAttribute("data-item-count"))||0,r=Math.max(o,parseInt(n)||0),i=r>s,c=document.querySelector(".js-downgrade-button");c instanceof HTMLButtonElement&&(c.disabled=r===a);const l=new URL(t.getAttribute("data-url"),window.location.origin),m=new URLSearchParams(l.search.slice(1));m.append(e,r.toString()),document.querySelector(".js-transform-user")&&m.append("transform_user","1"),l.search=m.toString(),null==w||w.abort();const{signal:p}=w=new AbortController;let g=null;try{const t=await fetch(l.toString(),{signal:p,headers:{Accept:"application/json"}});if(!t.ok)return;g=await t.json()}catch(q){}if(p.aborted)return;if(!g)return;const f=document.querySelector(".js-contact-us");f&&f.classList.toggle("d-none",!i);const h=document.querySelector(".js-payment-summary");h&&h.classList.toggle("d-none",i);const j=document.querySelector(".js-submit-billing");j instanceof HTMLElement&&(j.hidden=i);const L=document.querySelector(".js-billing-section");L&&L.classList.toggle("has-removed-contents",g.free||g.is_enterprise_cloud_trial);const v=document.querySelector(".js-upgrade-info");v&&v.classList.toggle("d-none",r<=0);const b=document.querySelector(".js-downgrade-info");b&&b.classList.toggle("d-none",r>=0);const y=document.querySelector(".js-extra-seats-line-item");y&&y.classList.toggle("d-none",g.no_additional_seats),document.querySelector(".js-seat-field")&&function(t){for(const e of document.querySelectorAll(".js-seat-field"))e.value=t}(n);const T=document.querySelector(".js-minimum-seats-disclaimer");T&&(T.classList.toggle("tooltipped",5===g.seats),T.classList.toggle("tooltipped-nw",5===g.seats));const E=g.selectors;for(const u in E)for(const t of document.querySelectorAll(u))t.innerHTML=E[u];u(d(),"",g.url)}async function E(t,e,n){const s=o(document,t),a=o(document,e);function r(t){a.hidden=t,a.open=!1,s.hidden=!t}let i;r(!0);try{i=await n.json()}catch(l){return r(!1),void m()}const c=i.json;try{await p(c.job_url)}catch(l){return r(!1),void m()}r(!1),window.location=c.export_url}async function q(t){await function(t){return new Promise((function(e){function n(){t.hasFocus()&&(e(),t.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n),window.removeEventListener("blur",n))}t.addEventListener("visibilitychange",n),window.addEventListener("focus",n),window.addEventListener("blur",n),n()}))}(document),await new Promise(t=>setTimeout(t,1e3)),t instanceof HTMLButtonElement&&(t.disabled=!1)}function S(t){t.preventDefault()}t("click",".js-org-signup-duration-change",t=>{t.preventDefault();const e=t.currentTarget.getAttribute("data-plan-duration");!function(t){const e="year"===t?"month":"year";for(const n of document.querySelectorAll(".js-plan-duration-text"))n.innerHTML=t;for(const n of document.querySelectorAll(".unstyled-available-plan-duration-adjective"))n.innerHTML=`${t}ly`;for(const n of document.querySelectorAll(".js-org-signup-duration-change"))n.setAttribute("data-plan-duration",e)}(e),function(t){for(const e of document.querySelectorAll(".js-seat-field")){const n=new URL(e.getAttribute("data-url"),window.location.origin),o=new URLSearchParams(n.search.slice(1));o.delete("plan_duration"),o.append("plan_duration",t),n.search=o.toString(),e.setAttribute("data-url",n.toString())}}(e);for(const n of document.querySelectorAll(".js-seat-field"))T(n);!function(){for(const t of document.querySelectorAll(".js-unit-price"))t.hidden=!t.hidden}()}),e(".js-addon-purchase-field",{constructor:HTMLInputElement,add(t){c(t)&&T(t),l(t,(function(){T(t)}))}}),e(".js-addon-downgrade-field",{constructor:HTMLSelectElement,add(t){c(t)&&T(t),t.addEventListener("change",(function(){T(t)}))}}),t("details-menu-selected",".js-organization-container",(function(t){const e=document.querySelector(".js-addon-purchase-field"),n=t.target.querySelector("input:checked");if(e instanceof HTMLInputElement&&n instanceof HTMLInputElement){const t=n.getAttribute("data-upgrade-url");t&&(e.setAttribute("data-url",t),e.value="0",T(e))}}),{capture:!0}),n(".js-audit-log-export-form",(async function(t,e){await E(".js-audit-log-exporting",".js-audit-log-export-menu",e)})),n(".js-audit-log-git-event-export-form",(async function(t,e){await E(".js-audit-log-git-event-exporting",".js-audit-log-git-event-export-menu",e)})),e("#js-oauth-authorize-btn",t=>{q(t)}),e("#js-manual-authorize-redirect",t=>{!async function(t){t.addEventListener("click",S),t.classList.add("text-gray"),await new Promise(t=>setTimeout(t,3e3)),t.classList.remove("text-gray"),t.removeEventListener("click",S)}(t)}),n(".js-toggler-container .js-set-approval-state",(async function(t,e){const n=s(t,".js-toggler-container");n.classList.add("loading");const o=await e.json();"approved"===o.json.approval_state?n.classList.add("on"):"denied"===o.json.approval_state&&(n.classList.add("revoked"),n.classList.remove("on")),n.classList.remove("loading")})),n(".js-request-access-approval-form",(async function(t,e){await e.text();const n=a(t,"data-container-id");o(document,`#${n}`).classList.add("on")})),t("details-menu-selected",".js-select-plan-menu",(function(t){const e=t.detail.relatedTarget,n=document.querySelectorAll(".js-plan-card-section");for(const r of n)r instanceof HTMLElement&&(r.hidden=!0);const o=t.currentTarget.querySelectorAll("[role^=menuitem]"),s=Array.from(o).indexOf(e),a=Array.from(n)[s];a instanceof HTMLElement&&(a.hidden=!1)}),{capture:!0}),e(".js-suggested-usernames-container",(function(t){const e=r(t,".js-suggested-username",HTMLInputElement),n=document.querySelector(".js-signup-form");if(n&&0!==e.length)for(const o of e)n.appendChild(o)})),g(".js-email-notice-trigger",(function(t){const e=r(document,".js-email-notice");for(const n of e)n.classList.add("notice-highlight");t.addEventListener("blur",(function(){for(const t of e)t.classList.remove("notice-highlight")}))})),e(".js-plan-choice:checked",{add(t){const e=t.closest(".plan-row");e&&e.classList.add("selected")},remove(t){const e=t.closest(".plan-row");e&&e.classList.remove("selected")}});const M=new WeakMap;function A(t){const e=t.target,n=s(e,"form");if(e.closest("input[type=text]")&&!M.get(n)){const t=o(n,".js-signup-source",HTMLInputElement);let e=t.value;t.hasAttribute("data-ga-label")&&(e=`${e}${t.getAttribute("data-ga-label")}`),h({category:"Sign up",action:"Attempt",label:e}),M.set(n,!0)}}function H(){const t=o(document,".js-password-with-confirmation",HTMLInputElement),e=o(document,".js-password-confirm",HTMLInputElement);e.value!==t.value?function(t){const e=s(t,".js-form-group");e.classList.add("errored");const n=t.getAttribute("data-validity-message");if(n){t.setCustomValidity(n);const e=s(t,"form",HTMLFormElement);v(e)}const o=e.querySelector(".error"),a=t.getAttribute("data-error-message");if(!o&&a){const t=document.createElement("dd");t.classList.add("error"),t.innerHTML=a,e.appendChild(t)}}(e):function(t){const e=s(t,".js-form-group");t.setCustomValidity(""),e.classList.remove("errored");const n=s(t,"form",HTMLFormElement);v(n);const o=e.querySelector(".error");o&&e.removeChild(o)}(e)}function x(t,e,n){const o=t.getBoundingClientRect().height,s=e.getBoundingClientRect(),a=n.getBoundingClientRect();let r=a.top;r+s.height+10>=o&&(r=Math.max(o-s.height-10,0));let i=a.right;null!=n.closest(".js-build-status-to-the-left")&&(i=Math.max(a.left-s.width-10,0)),e.style.top=`${r}px`,e.style.left=`${i}px`,e.style.right="auto"}async function I(t){const e=t.querySelector(".js-dropdown-details"),n=t.querySelector(".js-status-dropdown-menu")||t.closest(".js-status-dropdown-menu");if(!(n instanceof HTMLElement))return;const s=n.querySelector(".js-status-loader");if(!s)return;const r=o(n,".js-status-loading"),i=o(n,".js-status-error"),c=a(s,"data-contents-url");let l;r.classList.remove("d-none"),i.classList.add("d-none");try{await b(),l=await y(document,c)}catch(u){r.classList.add("d-none"),i.classList.remove("d-none")}l&&(s.replaceWith(l),o(n,".js-details-container").classList.add("open"),e&&n.classList.contains("js-append-menu-to-body")&&x(document.body,n,e))}function k(t){I(t.currentTarget)}e(".js-signup-form",{subscribe:t=>f(t,"input",A)}),t("submit",".js-signup-form-submit",(function(t){const e=t.currentTarget,n=o(e,".js-signup-source",HTMLInputElement);let s=n.value;n.hasAttribute("data-ga-label")&&(s=`${s}${n.getAttribute("data-ga-label")}`),h({category:"Sign up",action:"Submit",label:s})})),t("submit",".js-org-survey",(function(t){const e=t.currentTarget,n=r(e,".js-other-text",HTMLInputElement);for(const o of n){const t=j(o,"js-other-hidden-input");t instanceof HTMLInputElement&&(t.checked=o.value.length>0)}})),e(".js-show-next-question-trigger:checked",{constructor:HTMLElement,add(t){const e=t.closest(".js-show-next-question");if(e instanceof HTMLElement){const t=j(e,"js-hidden-question");t&&(t.hidden=!1)}},remove(t){const e=t.closest(".js-show-next-question");if(e instanceof HTMLElement){const t=j(e,"js-hidden-question");t&&(t.hidden=!0)}}}),e(".js-octocaptcha-parent",(function(t){const e=o(t,".js-octocaptcha-spinner"),n=o(t,".js-octocaptcha-success"),s=o(t,".js-octocaptcha-token",HTMLInputElement),a=o(t,".js-octocaptcha-form-submit",HTMLButtonElement),r=o(t,".js-octocaptcha-frame-container"),i=o(t,".js-octocaptcha-frame",HTMLIFrameElement),c=s.getAttribute("data-octocaptcha-url"),l=s.getAttribute("data-octocaptcha-timeout"),u=l?parseInt(l):3e4;let d=!1;const m=()=>{d||(d=!0,e.classList.add("d-none"),n.classList.remove("d-none"),g())},p=()=>{if(d)return;const e=document.createElement("input");e.type="hidden",e.id="error_loading_captcha",e.name="error_loading_captcha",e.value="1",t.appendChild(e),s.required=!1,m()},g=()=>{t.checkValidity()&&(a.disabled=!1)};setTimeout(p,u),i.addEventListener("error",p),window.addEventListener("message",t=>{if(t.origin!==c)return;const n=t.data&&t.data.event;var o;"captcha-loaded"===n?d||(d=!0,e.classList.add("d-none"),r.classList.remove("v-hidden","zero-height"),null===(o=i.contentWindow)||void 0===o||o.postMessage({event:"captcha-loaded-ack"},c||"")):"captcha-complete"===n?(s.value=t.data.sessionToken,(()=>{const t=r.getAttribute("data-ga-event-category");t&&h({category:t,action:"success",label:"captcha verified"})})(),g()):"captcha-suppressed"===n&&m()})})),e(".js-survey-answer-choice:checked",{add(t){const e=t.closest(".js-answer");if(e){const t=e.querySelector(".js-answer-choice");t&&(t.classList.remove("border-black-fade","bg-white"),t.classList.add("border-blue","bg-blue-light"))}const n=document.querySelector(`.js-other-input-box[data-other-input-for=${t.getAttribute("data-question-short-text")}]`);n instanceof HTMLElement&&t.classList.contains("js-other-choice")&&(n.hidden=!1)},remove(t){const e=t.closest(".js-answer");if(e){const t=e.querySelector(".js-answer-choice");t&&(t.classList.remove("border-blue","bg-blue-light"),t.classList.add("border-black-fade","bg-white"))}const n=document.querySelector(`.js-other-input-box[data-other-input-for=${t.getAttribute("data-question-short-text")}]`);n instanceof HTMLElement&&t.classList.contains("js-other-choice")&&(n.hidden=!0)}}),e(".js-allow-multiple:checked",{constructor:HTMLInputElement,add(t){const e=parseInt(t.getAttribute("data-max-choices")||""),n=s(t,".js-question"),o=r(n,".js-allow-multiple",HTMLInputElement);if(o.filter(t=>!0===t.checked).length>=e)for(const s of o)!1===s.checked&&(s.disabled=!0)},remove(t){const e=s(t,".js-question");for(const n of r(e,".js-allow-multiple",HTMLInputElement))n.disabled=!1}}),L("keyup",".js-password-with-confirmation",()=>{""!==o(document,".js-password-confirm",HTMLInputElement).value&&H()}),L("keyup",".js-password-confirm",H),e(".js-site-status-template",{constructor:HTMLTemplateElement,initialize(t){!async function(t){var e,n;const o=null===(n=null===(e=document.head)||void 0===e?void 0:e.querySelector('meta[name="site-status-api-url"]'))||void 0===n?void 0:n.content;if(!o)return;const s=await(await window.fetch(o)).json(),a=s.status.indicator;"none"!==a&&t.before(new i(t,{time:s.page.updated_at,description:s.status.description,class:"minor"===a?"flash-warn":"flash-error"}))}(t)}}),e(".js-contact-javascript-flag",{constructor:HTMLInputElement,add(t){t.value="true"}}),t("toggle",".js-build-status .js-dropdown-details",(function(t){const e=t.currentTarget,n=e.querySelector(".js-status-dropdown-menu");function s(){e.hasAttribute("open")||r()}function a(t){n.contains(t.target)||r()}function r(){e.removeAttribute("open"),n.classList.add("d-none"),e.appendChild(n),e.removeEventListener("toggle",s),window.removeEventListener("scroll",a)}n&&(e.addEventListener("toggle",s),n.classList.contains("js-close-menu-on-scroll")&&window.addEventListener("scroll",a,{capture:!0}),n.classList.remove("d-none"),o(n,".js-details-container").classList.add("open"),n.classList.contains("js-append-menu-to-body")&&(document.body.appendChild(n),x(document.body,n,e)))}),{capture:!0}),t("click",".js-status-retry",({currentTarget:t})=>{I(t)}),e(".js-build-status",{add(t){t.addEventListener("mouseenter",k,{once:!0})},remove(t){t.removeEventListener("mouseenter",k)}}),t("upload:setup",".js-upload-enterprise-installation-user-accounts-upload",(function(t){const{form:e}=t.detail,n=t.currentTarget.getAttribute("data-business-id");n&&e.append("business_id",n);const o=t.currentTarget.getAttribute("data-enterprise-installation-id");o&&e.append("enterprise_installation_id",o)})),t("upload:complete",".js-upload-enterprise-installation-user-accounts-upload",(function(t){const{attachment:e}=t.detail,n=o(t.currentTarget,".js-enterprise-installation-user-accounts-upload-id",HTMLInputElement);n.value=e.id;const s=o(t.currentTarget,".js-enterprise-installation-id",HTMLInputElement),a=t.currentTarget.getAttribute("data-enterprise-installation-id");a&&(s.value=a);const r=n.form;r&&r.submit()}))}}}));
//# sourceMappingURL=github-88d67627.js.map
